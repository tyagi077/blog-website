<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Blogs - Blogify</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <div class="container-fluid">
    <div class="row">
      <!-- Sidebar -->
      <aside class="col-md-2 bg-light vh-100 p-3">
        <%- include('partials/sidebar') %>
      </aside>

      <!-- Main Content -->
      <main class="col-md-10 p-4">
        <h2 class="mb-4">My Blogs</h2>

        <% if (blogs.length === 0) { %>
          <p class="text-muted">You have not created any blogs yet.</p>
        <% } else { %>
          <div class="row g-4">
            <% blogs.forEach(blog => { %>
              <div class="col-md-4">
                <div class="card h-100 shadow-sm">
                  <% if (blog.image) { %>
                    <img src="<%= blog.image %>" class="card-img-top" alt="Blog Image" style="height: 180px; object-fit: cover;">
                  <% } %>
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title"><%= blog.title %></h5>
                    <p class="card-text text-muted"><strong>Sector:</strong> <%= blog.Sector ? blog.Sector.name : 'N/A' %></p>
                    <p class="card-text"><%= blog.description.substring(0, 150) %>...</p>
                    <p class="card-text mt-auto">
                      <% if (blog.scope === 'public') { %>
                        <strong>Status:</strong> <%= blog.is_approved ? '‚úÖ Approved' : '‚è≥ Pending' %><br>
                      <% } %>
                      <strong>Scope:</strong> <%= blog.scope %>
                    </p>

                    <div class="mt-3 d-flex justify-content-between">
                      <a href="/blogs/edit/<%= blog.id %>" class="btn btn-warning btn-sm">‚úèÔ∏è Edit</a>

                      <form action="/blogs/delete/<%= blog.id %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this blog?');">
                        <button type="submit" class="btn btn-danger btn-sm">üóëÔ∏è Delete</button>
                      </form>
                    </div>

                    <a href="/blogs/blogs/<%= blog.id %>" class="btn btn-primary mt-3">üìñ Read More</a>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        <% } %>
      </main>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
